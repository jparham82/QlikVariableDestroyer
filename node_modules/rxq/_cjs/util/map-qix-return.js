"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _handle = require("../handle.js");

var _handle2 = _interopRequireDefault(_handle);

var _operators = require("rxjs/operators");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = function (handle, returnParam) {
  return function (src$) {
    return src$.pipe((0, _operators.map)(function (r) {
      var hasQType = r.hasOwnProperty("qReturn") && r.qReturn.hasOwnProperty("qType");

      if (hasQType) {
        var qClass = r.qReturn.qType;
        return new _handle2.default(handle.session, r.qReturn.qHandle, qClass);
      } else if (returnParam) {
        return r[returnParam];
      } else {
        return r;
      }
    }));
  };
};

module.exports = exports["default"];